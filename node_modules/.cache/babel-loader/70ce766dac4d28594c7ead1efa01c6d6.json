{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, Fragment as _Fragment } from \"vue\";\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"h-5 w-5\",\n  fill: \"none\",\n  viewBox: \"0 0 24 24\",\n  stroke: \"currentColor\"\n}, [/*#__PURE__*/_createElementVNode(\"path\", {\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\",\n  \"stroke-width\": \"2\",\n  d: \"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z\"\n})], -1);\n\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"p-8 text-gray-500 text-center\"\n};\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { fetchTweets, authorFilter } from '@/api';\nimport { useFromRoute, useWorkspace } from '@/composables';\nimport TweetList from '@/components/TweetList';\nimport TweetSearch from '@/components/TweetSearch'; // Data.\n\nexport default {\n  setup(__props) {\n    const router = useRouter();\n    const tweets = ref([]);\n    const loading = ref(true);\n    const author = ref('');\n    const viewedAuthor = ref('');\n    const workspace = useWorkspace(); // Actions.\n\n    const search = () => {\n      router.push(`/users/${author.value}`);\n    };\n\n    const fetchAuthorTweets = async () => {\n      if (author.value === viewedAuthor.value) return;\n\n      try {\n        loading.value = true;\n        const fetchedTweets = await fetchTweets(workspace, [authorFilter(author.value)]);\n        tweets.value = fetchedTweets;\n        viewedAuthor.value = author.value;\n      } finally {\n        loading.value = false;\n      }\n    }; // Router hooks.\n\n\n    useFromRoute(route => {\n      author.value = route.params.author;\n\n      if (author.value) {\n        fetchAuthorTweets();\n      } else {\n        tweets.value = [];\n        viewedAuthor.value = '';\n      }\n    });\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_unref(TweetSearch), {\n        placeholder: \"public key\",\n        disabled: !author.value,\n        modelValue: author.value,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => author.value = $event),\n        onSearch: search\n      }, {\n        icon: _withCtx(() => [_hoisted_1]),\n        _: 1\n      }, 8, [\"disabled\", \"modelValue\"]), viewedAuthor.value ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createVNode(_unref(TweetList), {\n        tweets: tweets.value,\n        loading: loading.value\n      }, null, 8, [\"tweets\", \"loading\"]), tweets.value.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, \" User not found... \")) : _createCommentVNode(\"\", true)])) : _createCommentVNode(\"\", true)], 64);\n    };\n  }\n\n};","map":{"version":3,"sources":["/home/magma/solana-twitter/app/src/components/PageUsers.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACA,SAAS,GAAT,QAAoB,KAApB;AACA,SAAS,SAAT,QAA0B,YAA1B;AACA,SAAS,WAAT,EAAsB,YAAtB,QAA0C,OAA1C;AACA,SAAS,YAAT,EAAuB,YAAvB,QAA2C,eAA3C;AACA,OAAO,SAAP,MAAsB,wBAAtB;AACA,OAAO,WAAP,MAAwB,0BAAxB,C,CAEA;;;;AACA,UAAM,MAAM,GAAG,SAAS,EAAxB;AACA,UAAM,MAAM,GAAG,GAAG,CAAC,EAAD,CAAlB;AACA,UAAM,OAAO,GAAG,GAAG,CAAC,IAAD,CAAnB;AACA,UAAM,MAAM,GAAG,GAAG,CAAC,EAAD,CAAlB;AACA,UAAM,YAAY,GAAG,GAAG,CAAC,EAAD,CAAxB;AACA,UAAM,SAAS,GAAG,YAAY,EAA9B,C,CAEA;;AACA,UAAM,MAAM,GAAG,MAAM;AACjB,MAAA,MAAM,CAAC,IAAP,CAAa,UAAS,MAAM,CAAC,KAAM,EAAnC;AACH,KAFD;;AAIA,UAAM,iBAAiB,GAAG,YAAY;AAClC,UAAI,MAAM,CAAC,KAAP,KAAiB,YAAY,CAAC,KAAlC,EAAyC;;AACzC,UAAI;AACA,QAAA,OAAO,CAAC,KAAR,GAAgB,IAAhB;AACA,cAAM,aAAa,GAAG,MAAM,WAAW,CAAC,SAAD,EAAY,CAAC,YAAY,CAAC,MAAM,CAAC,KAAR,CAAb,CAAZ,CAAvC;AACA,QAAA,MAAM,CAAC,KAAP,GAAe,aAAf;AACA,QAAA,YAAY,CAAC,KAAb,GAAqB,MAAM,CAAC,KAA5B;AACH,OALD,SAKU;AACN,QAAA,OAAO,CAAC,KAAR,GAAgB,KAAhB;AACH;AACJ,KAVD,C,CAYA;;;AACA,IAAA,YAAY,CAAE,KAAD,IAAW;AACpB,MAAA,MAAM,CAAC,KAAP,GAAe,KAAK,CAAC,MAAN,CAAa,MAA5B;;AACA,UAAI,MAAM,CAAC,KAAX,EAAkB;AACd,QAAA,iBAAiB;AACpB,OAFD,MAEO;AACH,QAAA,MAAM,CAAC,KAAP,GAAe,EAAf;AACA,QAAA,YAAY,CAAC,KAAb,GAAqB,EAArB;AACH;AACJ,KARW,CAAZ","sourcesContent":["<script setup>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { fetchTweets, authorFilter } from '@/api'\nimport { useFromRoute, useWorkspace } from '@/composables'\nimport TweetList from '@/components/TweetList'\nimport TweetSearch from '@/components/TweetSearch'\n\n// Data.\nconst router = useRouter()\nconst tweets = ref([])\nconst loading = ref(true)\nconst author = ref('')\nconst viewedAuthor = ref('')\nconst workspace = useWorkspace()\n\n// Actions.\nconst search = () => {\n    router.push(`/users/${author.value}`)\n}\n\nconst fetchAuthorTweets = async () => {\n    if (author.value === viewedAuthor.value) return\n    try {\n        loading.value = true\n        const fetchedTweets = await fetchTweets(workspace, [authorFilter(author.value)])\n        tweets.value = fetchedTweets\n        viewedAuthor.value = author.value\n    } finally {\n        loading.value = false\n    }\n}\n\n// Router hooks.\nuseFromRoute((route) => {\n    author.value = route.params.author\n    if (author.value) {\n        fetchAuthorTweets()\n    } else {\n        tweets.value = []\n        viewedAuthor.value = ''\n    }\n})\n</script>\n\n<template>\n    <tweet-search placeholder=\"public key\" :disabled=\"! author\" v-model=\"author\" @search=\"search\">\n        <template #icon>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z\" />\n            </svg>\n        </template>\n    </tweet-search>\n    <div v-if=\"viewedAuthor\">\n        <tweet-list :tweets=\"tweets\" :loading=\"loading\"></tweet-list>\n        <div v-if=\"tweets.length === 0\" class=\"p-8 text-gray-500 text-center\">\n            User not found...\n        </div>\n    </div>\n</template>\n"]},"metadata":{},"sourceType":"module"}